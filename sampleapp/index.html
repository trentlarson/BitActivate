<!DOCTYPE html>
<html>
  <head>
    <title>Sample</title>
  <script src="./lib/jquery-2.1.1.min.js"></script>
  <script>
  var spawn = require('child_process').spawn;

  function spawnOther() {
    $('#waitOnActivate').show();
    var nwProc = process.execPath;
    baProc = spawn(nwProc, ['../ba', '{"function":"Activate","feature":"PREMIUM", "description":"A Premium Feature", "address":"1DNWKU4WABPyPPTD6yWcTQbA85ViGQGjNE","price":2.95,"currency":"USD"}']);

    baProc.stdout.on('data', function (data) {
      console.log('stdout: ' + data);
      result = JSON.parse(data);
      console.log("result is: " + result.result);
    });

    baProc.stderr.on('data', function (data) {
      console.log('stderr: ' + data);
    });

    baProc.on('close', function (code) {
      console.log('child process exited with code ' + code);
      $('#waitOnActivate').hide();
    });
  }

  $( document ).ready(function() {
    $('#waitOnActivate').hide();
  });
  </script>
  </head>
  <body>
    <h1>Sample app!</h1>
    <a href="#" onclick="javascript:spawnOther();">(check)</a>
    <img id="waitOnActivate" src="http://opengraphicdesign.com/wp-content/uploads/2009/01/loadera64.gif" height="15" width="15"/>
  </body>
</html>
